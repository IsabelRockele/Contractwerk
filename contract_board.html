<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contractwerkbord</title>

  <link rel="manifest" href="contract_manifest.json">
  <meta name="theme-color" content="#4A90E2">
  <link rel="stylesheet" href="contract_style.css" />

  <!-- QRCode (klein) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

  <!-- Kleine, eigen styles voor het laadvenster -->
  <style>
    #loadingOverlay {
      position: fixed; inset: 0; background: rgba(255,255,255,0.9);
      display: none; align-items: center; justify-content: center; z-index: 9999;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }
    #loadingOverlay.show { display: flex; }
    .loader-box {
      text-align: center; padding: 24px 28px; border-radius: 14px; background: #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border: 1px solid #eaeaea;
    }
    .spinner {
      width: 44px; height: 44px; margin: 0 auto 12px auto; border-radius: 50%;
      border: 4px solid #e3e3e3; border-top-color: #4A90E2; animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .loader-text { font-size: 15px; color: #333; }
  </style>
</head>
<body>
  <header class="bovenbalk">
    <div class="titelvak">
      <div class="bord-info">
        <span id="bordNaam">Contractbord</span>
      </div>
    </div>
    <div class="acties" id="actiesLeerkracht" hidden>
      <button id="btnKolomPlus" class="sec">+ Kolom</button>
      <button id="btnRijPlus" class="sec">+ Nummer</button>
      <button id="btnPdf" class="prim">Download als PDF</button>
      <button id="btnReset" class="warn">Alles resetten</button>
      <button id="btnToonQR" class="sec">QR-code</button>
      <button id="btnUitloggen" class="sec">Uitloggen</button>
    </div>
  </header>

  <main>
    <div id="tabelWrapper">
      <table id="bordTabel" aria-label="Contractwerkbord">
        <thead>
          <tr id="headerRij">
            <th class="sticky-left sticky-top cel-label">Nr.</th>
            <th class="sticky-top cel-plus"><button id="kolomPlusTop" title="Kolom toevoegen">+</button></th>
          </tr>
          <tr id="headerAfbeeldingen">
            <th class="sticky-left sticky-top subheader"></th>
            <th class="sticky-top subheader"></th>
          </tr>
        </thead>
        <tbody id="bodyRijen"></tbody>
      </table>
    </div>
  </main>

  <!-- Laadvenster voor PDF -->
  <div id="loadingOverlay" aria-live="polite" aria-busy="true">
    <div class="loader-box">
      <div class="spinner" role="img" aria-label="Bezig…"></div>
      <div class="loader-text">PDF wordt gegenereerd… even geduld a.u.b.</div>
    </div>
  </div>

  <dialog id="qrDialog">
    <h3>QR-code voor dit bord</h3>
    <canvas id="qrCanvas" width="256" height="256" aria-label="QR-code"></canvas>
    <form method="dialog"><button>Sluiten</button></form>
  </dialog>

  <template id="kolomTemplate">
    <th class="sticky-top kolomkop">
      <div class="kolom-selector">
        <button class="pijl links" data-dir="-1" title="Vorige activiteit">◀</button>
        <img class="kolom-afb" alt="Activiteit" />
        <button class="pijl rechts" data-dir="1" title="Volgende activiteit">▶</button>
      </div>
      <div class="kolom-naam"></div>
      <button class="kolom-verwijder" title="Verwijder kolom">✕</button>
    </th>
  </template>

  <template id="statusCelTemplate">
    <td class="status-cel">
      <button class="bolletje" aria-pressed="false" title="Klik om te wisselen"></button>
    </td>
  </template>

  <script type="module" src="contract_script.js"></script>
</body>
</html>





